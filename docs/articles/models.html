<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Use of models in SamplingStrata • SamplingStrata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Use of models in SamplingStrata">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SamplingStrata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/SamplingStrata.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/models.html">Use of models in SamplingStrata</a>
    </li>
    <li>
      <a href="../articles/spatial.html">Spatial sampling with SamplingStrata</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="models_files/jquery-1.11.3/jquery.min.js"></script><script src="models_files/elevate-section-attrs-2.0/elevate-section-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Use of models in SamplingStrata</h1>
                        <h4 class="author">Giulio Barcaroli</h4>
            
            <h4 class="date">2020-01-14</h4>
      
      
      <div class="hidden name"><code>models.Rmd</code></div>

    </div>

    
    
<div id="handling-anticipated-variance" class="section level1">
<h1 class="hasAnchor">
<a href="#handling-anticipated-variance" class="anchor"></a>Handling Anticipated Variance</h1>
<p>When optimizing the stratification of a sampling frame, values of the target variables Y’s are supposed to be available for the generality of the units in the frame, or at least for a sample of them by means of which it is possible to estimate means and standard deviation of Y’s in atomic strata. Of course, this assumption is seldom expected to hold. The situation in which some proxy variables are available in the frame is much more likely to happen. In these situations, instead of directly indicating the real target variables, proxy ones are named as Y’s. By so doing, there is no guarantee that the final stratification and allocation can ensure the compliance to the set of precision constraints.<br>
In order to take into account this problem, and to limit the risk of overestimating the expected precision levels of the optimized solution, it is possible to carry out the optimization by considering, instead of the expected coefficients of variation related to proxy variables, the anticipated coefficients of variation (ACV) that depend on the model that is possile to fit on couples of real target variables and proxy ones. In the current implementation, only models linking continuous variables can be considered. The definition and the use of these models is the same that has been implemented in the package <em>stratification</em> <span class="citation">(see Baillargeon and Rivest 2014)</span>. In particular, the reference here is to two different models, the linear model with heteroscedasticity:</p>
<p><span class="math display">\[Y=\beta\times X + \epsilon\]</span></p>
<p>where</p>
<p><span class="math display">\[\epsilon \sim N(0,\sigma^{2\gamma})\]</span></p>
<p>(in case <span class="math inline">\(\gamma = 0\)</span>, then the model is homoscedastic)</p>
<p>and the loglinear model:</p>
<p><span class="math display">\[Y= \exp (\beta \times log(X) + \epsilon)\]</span></p>
<p>where</p>
<p><span class="math display">\[\epsilon \sim N(0,\sigma^{2})\]</span></p>
<p>In order to make evident the importance of the above, consider the following example, based on the dataset <em>swissmunicipalities</em> available in the package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(SamplingStrata)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"swissmunicipalities"</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a>swissmunicipalities<span class="op">$</span>id &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(swissmunicipalities))</span>
<span id="cb1-4"><a href="#cb1-4"></a>swissmunicipalities<span class="op">$</span>dom &lt;-<span class="st"> </span><span class="dv">1</span></span></code></pre></div>
<p>Let us assume that in the sampling frame only variable <em>total population</em> is available for all municipalities, while <em>industrial area</em> and <em>buildings area</em> are available only on a sample of 500 municipalities.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1234</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>swiss_sample &lt;-<span class="st"> </span>swissmunicipalities[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(swissmunicipalities)),<span class="dv">500</span>),]</span></code></pre></div>
<p>In this subset we can fit models between POPTOT and the two variables that we assume are the target of our survey.</p>
<p>One model for <em>industrial area</em> and <em>total population</em>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>mod_Airind_POPTOT &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(swiss_sample<span class="op">$</span>Airind <span class="op">~</span><span class="st"> </span>swiss_sample<span class="op">$</span>POPTOT)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(mod_Airind_POPTOT)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = swiss_sample$Airind ~ swiss_sample$POPTOT)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -48.466  -2.233  -1.400   0.502  82.261 
## 
## Coefficients:
##                      Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)         1.115e+00  4.305e-01    2.59  0.00988 ** 
## swiss_sample$POPTOT 2.457e-03  9.303e-05   26.41  &lt; 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 8.309 on 498 degrees of freedom
## Multiple R-squared:  0.5835, Adjusted R-squared:  0.5827 
## F-statistic: 697.7 on 1 and 498 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>and one model for <em>buildings area</em> and <em>total population</em>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>mod_Airbat_POPTOT &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(swiss_sample<span class="op">$</span>Airbat <span class="op">~</span><span class="st"> </span>swiss_sample<span class="op">$</span>POPTOT)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(mod_Airbat_POPTOT)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = swiss_sample$Airbat ~ swiss_sample$POPTOT)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -143.380  -12.223   -4.391    7.336  208.728 
## 
## Coefficients:
##                      Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)         1.968e+01  1.320e+00   14.90   &lt;2e-16 ***
## swiss_sample$POPTOT 1.192e-02  2.854e-04   41.78   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 25.49 on 498 degrees of freedom
## Multiple R-squared:  0.778,  Adjusted R-squared:  0.7776 
## F-statistic:  1745 on 1 and 498 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>We calculate the heteroscedasticity index and associated prediction standard error for both models:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>airind &lt;-<span class="st"> </span><span class="kw"><a href="../reference/computeGamma.html">computeGamma</a></span>(mod_Airind_POPTOT<span class="op">$</span>residuals,</span>
<span id="cb7-2"><a href="#cb7-2"></a>             swiss_sample<span class="op">$</span>POPTOT,</span>
<span id="cb7-3"><a href="#cb7-3"></a>             <span class="dt">nbins =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="models_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>airind</span></code></pre></div>
<pre><code>##      gamma      sigma   r.square 
## 0.79952447 0.01229547 0.99476123</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>airbat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/computeGamma.html">computeGamma</a></span>(mod_Airbat_POPTOT<span class="op">$</span>residuals,</span>
<span id="cb10-2"><a href="#cb10-2"></a>             swiss_sample<span class="op">$</span>POPTOT,</span>
<span id="cb10-3"><a href="#cb10-3"></a>             <span class="dt">nbins =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="models_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>airbat</span></code></pre></div>
<pre><code>##     gamma     sigma  r.square 
## 0.6419641 0.1220129 0.9535845</code></pre>
<p>We define the <em>sampling frame</em> in this way:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>frame &lt;-<span class="st"> </span><span class="kw"><a href="../reference/buildFrameDF.html">buildFrameDF</a></span>(swissmunicipalities,</span>
<span id="cb13-2"><a href="#cb13-2"></a>                      <span class="dt">id=</span><span class="st">"id"</span>,</span>
<span id="cb13-3"><a href="#cb13-3"></a>                      <span class="dt">X=</span><span class="st">"id"</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>                      <span class="dt">Y=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"POPTOT"</span>,<span class="st">"POPTOT"</span>),</span>
<span id="cb13-5"><a href="#cb13-5"></a>                      <span class="dt">domainvalue =</span> <span class="st">"dom"</span>)</span></code></pre></div>
<p>that is, we replicate twice the variable <em>GDP</em> because it will be used once for <em>infant mortality</em> and once for <em>contraception</em>.</p>
<p>We set 10% and 5% precision constraints on these variables:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>cv &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">DOM=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"DOM1"</span>,<span class="dv">1</span>),</span>
<span id="cb14-2"><a href="#cb14-2"></a>                         <span class="dt">CV1=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.10</span>,<span class="dv">1</span>),</span>
<span id="cb14-3"><a href="#cb14-3"></a>                         <span class="dt">CV2=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.05</span>,<span class="dv">1</span>),</span>
<span id="cb14-4"><a href="#cb14-4"></a>                         <span class="dt">domainvalue=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">1</span>)</span>
<span id="cb14-5"><a href="#cb14-5"></a>                    ))</span>
<span id="cb14-6"><a href="#cb14-6"></a>cv</span></code></pre></div>
<pre><code>##    DOM CV1  CV2 domainvalue
## 1 DOM1 0.1 0.05           1</code></pre>
<p>We now proceed in building the <em>strata</em> dataframe using the models:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>model &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>model<span class="op">$</span>beta[<span class="dv">1</span>] &lt;-<span class="st"> </span>mod_Airind_POPTOT<span class="op">$</span>coefficients[<span class="dv">2</span>]</span>
<span id="cb16-3"><a href="#cb16-3"></a>model<span class="op">$</span>sig2[<span class="dv">1</span>] &lt;-<span class="st"> </span>airind[<span class="dv">2</span>]<span class="op">^</span><span class="dv">2</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>model<span class="op">$</span>type[<span class="dv">1</span>] &lt;-<span class="st"> "linear"</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>model<span class="op">$</span>gamma[<span class="dv">1</span>] &lt;-<span class="st"> </span>airind[<span class="dv">1</span>]</span>
<span id="cb16-6"><a href="#cb16-6"></a>model<span class="op">$</span>beta[<span class="dv">2</span>] &lt;-<span class="st"> </span>mod_Airbat_POPTOT<span class="op">$</span>coefficients[<span class="dv">2</span>]</span>
<span id="cb16-7"><a href="#cb16-7"></a>model<span class="op">$</span>sig2[<span class="dv">2</span>] &lt;-<span class="st"> </span>airbat[<span class="dv">2</span>]<span class="op">^</span><span class="dv">2</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>model<span class="op">$</span>type[<span class="dv">2</span>] &lt;-<span class="st"> "linear"</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>model<span class="op">$</span>gamma[<span class="dv">2</span>] &lt;-<span class="st"> </span>airbat[<span class="dv">1</span>] </span>
<span id="cb16-10"><a href="#cb16-10"></a>model &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(model)</span>
<span id="cb16-11"><a href="#cb16-11"></a>model</span></code></pre></div>
<pre><code>##         beta         sig2   type     gamma
## 1 0.00245734 0.0001511787 linear 0.7995245
## 2 0.01192162 0.0148871469 linear 0.6419641</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>strata &lt;-<span class="st"> </span><span class="kw"><a href="../reference/buildStrataDF.html">buildStrataDF</a></span>(frame, <span class="dt">model =</span> model, <span class="dt">progress =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## 
## Computations are being done on population data
## 
## Number of strata:  2896
## ... of which with only one unit:  2896</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(strata)</span></code></pre></div>
<pre><code>##      STRATO N         M1         M2         S1        S2 COST CENS DOM1   X1
## 1         1 1 892.685342 4330.80350 342.994959 452.76794    1    0    1    1
## 10       10 1  99.220025  481.35934  59.219151 110.50409    1    0    1   10
## 100     100 1  27.822006  134.97661  21.426738  48.85160    1    0    1  100
## 1000   1000 1   3.695840   17.93012   4.266116  13.36856    1    0    1 1000
## 1001   1001 1   3.688468   17.89436   4.259311  13.35144    1    0    1 1001
## 1002   1002 1   3.683553   17.87051   4.254773  13.34001    1    0    1 1002</code></pre>
<p>We proceed with the optimization</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>kmean &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KmeansSolution.html">KmeansSolution</a></span>(strata,cv,<span class="dt">maxclusters=</span><span class="dv">10</span>,<span class="dt">showPlot=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## 
## -----------------
##  Kmeans solution 
## -----------------
##  *** Domain:  1  ***
##  Number of strata:  10
##  Sample size     :  107</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>nstrat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tapply">tapply</a></span>(kmean<span class="op">$</span>suggestions, kmean<span class="op">$</span>domainvalue,</span>
<span id="cb24-2"><a href="#cb24-2"></a>                 <span class="dt">FUN=</span><span class="cf">function</span>(x) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(x)))</span>
<span id="cb24-3"><a href="#cb24-3"></a>solution &lt;-<span class="st"> </span><span class="kw"><a href="../reference/optimStrata.html">optimStrata</a></span>(</span>
<span id="cb24-4"><a href="#cb24-4"></a>    <span class="dt">method =</span> <span class="st">"atomic"</span>,</span>
<span id="cb24-5"><a href="#cb24-5"></a>    <span class="dt">errors =</span> cv , </span>
<span id="cb24-6"><a href="#cb24-6"></a>    <span class="dt">framesamp =</span> frame, </span>
<span id="cb24-7"><a href="#cb24-7"></a>    <span class="dt">model =</span> model,</span>
<span id="cb24-8"><a href="#cb24-8"></a>    <span class="dt">iter =</span> <span class="dv">50</span>, </span>
<span id="cb24-9"><a href="#cb24-9"></a>    <span class="dt">pops =</span> <span class="dv">20</span>, </span>
<span id="cb24-10"><a href="#cb24-10"></a>    <span class="dt">parallel =</span> <span class="ot">FALSE</span>,</span>
<span id="cb24-11"><a href="#cb24-11"></a>    <span class="dt">suggestions =</span> kmean,</span>
<span id="cb24-12"><a href="#cb24-12"></a>    <span class="dt">nStrata =</span> nstrat,</span>
<span id="cb24-13"><a href="#cb24-13"></a>    <span class="dt">showPlot =</span> <span class="ot">FALSE</span>,</span>
<span id="cb24-14"><a href="#cb24-14"></a>    <span class="dt">writeFiles =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## 
## Input data have been checked and are compliant with requirements
## 
## Computations are being done on population data
## 
## Number of strata:  2896
## ... of which with only one unit:  2896Sequential optimization as parallel = FALSE, defaulting number of cores = 1
##  *** Domain :  1   1
##  Number of strata :  2896
## ---------------------------------------------
## Optimal stratification with Genetic Algorithm
## ---------------------------------------------
##  *** Parameters ***
## ---------------------------
## Domain:  1
## Maximum number of strata:  10
## Minimum number of units per stratum:  2
## Take-all strata (TRUE/FALSE):  FALSE
## number of sampling strata :  2896
## Number of target variables:  2
## Number of domains:  1
## Number of GA iterations:  50
## Dimension of GA population:  20
## Mutation chance in GA generation:  NA
## Elitism rate in GA generation:  0.2
## Chance to add strata to maximum:  0
## Allocation with real numbers instead of integers:  TRUE
##  *** Sample cost:  104.2297
##  *** Number of strata:  10</code></pre>
<p><img src="models_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<pre><code>## 
##  *** Sample size :  105
##  *** Number of strata :  10
## ---------------------------</code></pre>
<p>What about the expected CV’s?</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>newstrata &lt;-<span class="st"> </span><span class="kw"><a href="../reference/updateStrata.html">updateStrata</a></span>(strata,solution)</span>
<span id="cb27-2"><a href="#cb27-2"></a>framenew &lt;-<span class="st"> </span><span class="kw"><a href="../reference/updateFrame.html">updateFrame</a></span>(frame,newstrata)</span>
<span id="cb27-3"><a href="#cb27-3"></a>framenew &lt;-<span class="st"> </span>framenew[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(framenew<span class="op">$</span>ID),]</span>
<span id="cb27-4"><a href="#cb27-4"></a>framenew<span class="op">$</span>Y1 &lt;-<span class="st"> </span>swissmunicipalities<span class="op">$</span>Airind</span>
<span id="cb27-5"><a href="#cb27-5"></a>framenew<span class="op">$</span>Y2 &lt;-<span class="st"> </span>swissmunicipalities<span class="op">$</span>Airbat</span>
<span id="cb27-6"><a href="#cb27-6"></a>results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/evalSolution.html">evalSolution</a></span>(framenew, solution<span class="op">$</span>aggr_strata, <span class="dv">200</span>, <span class="dt">progress =</span> <span class="ot">FALSE</span>)</span>
<span id="cb27-7"><a href="#cb27-7"></a>results<span class="op">$</span>coeff_var</span></code></pre></div>
<pre><code>##      CV1    CV2  dom
## 1 0.0952 0.0386 DOM1</code></pre>
<p>These two CV’s regard respectively <em>industrial area</em> and <em>building area</em>: they are more than compliant with the precision constraints (10% and 5%).</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references hanging-indent">
<div id="ref-baillargeon:2014">
<p>Baillargeon, Sophie, and Louis-Paul Rivest. 2014. <em>Stratification: Univariate Stratification of Survey Populations</em>. <a href="https://CRAN.R-project.org/package=stratification">https://CRAN.R-project.org/package=stratification</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#handling-anticipated-variance">Handling Anticipated Variance</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Giulio Barcaroli, Marco Ballin, Hanjo Odendaal, Daniela Pagliuca, Egon Willighagen, Diego Zardetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
